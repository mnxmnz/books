---
sidebar_position: 3
---

# 3장 Critical Path 이해하기

## 1. Critical Rendering Path 란?

> **Critical Rendering Path**: 웹 페이지가 브라우저에서 렌더링을 시작하기까지의 단계

브라우저가 페이지를 렌더링하기 위해서는 HTML 문서와 중요 리소스가 필요하다.

### 1-1. 점진적 렌더링

웹은 본질적으로 분산되어 있다. 네이티브 앱과 달리 브라우저는 웹 사이트가 페이지를 렌더링하는 데 필요한 모든 리소스를 가지고 있다고 의존할 수 없다. 브라우저는 점진적으로 페이지를 렌더링한다.

- 일부 리소스만 가진 채 렌더링하면 페이지가 잠시 깨져 보이고 최종 렌더링과 상당히 달라질 수 있다.
- 모든 리소스를 기다리면 사용자가 불필요하게 오래 기다리게 된다.

## 2. 렌더링 경로의 단계

1. **DOM 구성**: HTML 에서 Document Object Model (DOM) 구성
2. **CSSOM 구성**: CSS 에서 CSS Object Model (CSSOM) 구성
3. **JavaScript 적용**: DOM 이나 CSSOM 을 변경하는 JavaScript 적용
4. **렌더 트리 구성**: DOM 과 CSSOM 에서 렌더 트리 구성
5. **레이아웃**: 페이지에서 요소가 어디에 맞는지 확인하는 스타일 및 레이아웃 작업 수행
6. **페인팅**: 메모리에서 요소의 픽셀 그리기
7. **합성**: 겹치는 픽셀이 있으면 합성
8. **화면 출력**: 결과 픽셀을 물리적으로 화면에 그리기

모든 단계를 완료한 후 사용자가 화면에서 콘텐츠를 볼 수 있다.

## 3. Critical Rendering Path 리소스

- **HTML의 일부**
- **`<head>` 요소 내의 렌더링 차단 CSS**
- **`<head>` 요소 내의 렌더링 차단 JavaScript**

### 3-1. 브라우저가 기다리지 않는 리소스

- 모든 HTML
- 폰트
- 이미지
- `<head>` 요소 외부의 비렌더링 차단 JavaScript
- `<head>` 요소 외부의 비렌더링 차단 CSS

## 4. 렌더링 차단 리소스

### 4-1. 렌더링 차단 리소스

일부 리소스는 브라우저가 이를 처리할 때까지 페이지 렌더링을 일시 중지하는 중요한 것으로 간주한다. 기본적으로 CSS 는 이 범주에 속한다.

- 브라우저가 CSS 를 보면 페이지 렌더링을 일시 중지한다.
- CSS 를 처리할 때까지 렌더링을 차단한다.

### 4-2. 파서 차단 리소스

파서 차단 리소스는 브라우저가 HTML 을 계속 파싱하는 것을 방지한다.

- JavaScript 는 기본적으로 파서를 차단한다. (비동기 또는 지연으로 표시하지 않은 JavaScript)
- JavaScript 는 실행 시 DOM 이나 CSSOM 을 변경할 수 있으므로 브라우저는 요청된 JavaScript 가 페이지 HTML 에 미치는 전체 영향을 알 때까지 다른 리소스를 계속 처리하지 않는다.

## 5. 차단 리소스 식별

### 5-1. 성능 감사 도구

성능 감사 도구로 렌더링 및 파서 차단 리소스를 식별할 수 있다.

- **WebPageTest**: 렌더링 차단 리소스를 URL 왼쪽의 주황색 원으로 표시
- **Lighthouse**: 렌더링을 실제로 지연시키는 리소스만 강조

## 6. Critical Rendering Path 최적화

- HTML 수신 시간 단축 (TTFB 메트릭으로 표시)
- 렌더링 차단 리소스의 영향 감소

## 7. 중요 콘텐츠 렌더링 경로

### 7-1. 대안적 관점

Critical Rendering Path 종료점이 첫 번째 페인트가 아니라 그 이후에 따라오는 더 콘텐츠가 풍부한 페인트 중 하나여야 하는지에 대한 의문이 제기되고 있다.

- **Largest Contentful Paint (LCP)** 또는 **First Contentful Paint (FCP)** 까지의 시간에 집중
- 콘텐츠가 풍부한 페인트를 렌더링하는 데 필요한 리소스 포함

### 7-2. 콘텐츠 렌더링 경로 식별

많은 도구가 LCP 요소와 렌더링 시점을 식별할 수 있다.

- **Lighthouse**: LCP 요소와 각 단계에서 소요된 시간을 보여주는 LCP 감사
